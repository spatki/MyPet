@{
    Layout = null;
}

@if (@User.Identity.IsAuthenticated)
{
    @Html.Action("BreadCrump", "Menu", new { id = ViewBag.FunctionID })
            <div class="row">
                <div class="col-md-12">
					<div class="panel colored">
                        <div class="panel-body">
                           <div class="row">
                                <div class="form-group">
                                    <label class="col-md-2">Select Project</label>
                                    <input type="hidden" name="selectedDoc" id="selectedDoc" value="0" />
                                    <div class="controls col-md-5" id="ProjectParams" data-updateid="#projectID" data-fill="ProjLocation" 
                                        data-fillurl="@Url.Action("getListItemsJSONFor","ProjLocation")" >
                                        @Html.Action("getListItems","Project",new { selectedItem = "0", controlName = "Project", excludeIds = "", selectIds = ViewBag.SelectedIDs, reload = "propogateChange loadProjectAllocationDetails"})
                                    </div>
                                    <div class="col-md-1">&nbsp;</div>
                                    <label class="col-md-2">Select Location</label>
                                    <div class="controls col-md-2" id="ProjLocationParams" data-updateid="#locationID">
                                        <select name="ProjLocation" id="ProjLocation" class="propogateChange form-control">
                                            <option value="">Select...</option>
                                        </select>
                                    </div>

                                </div>
                           </div>
                            <hr />
                            <ul class="nav nav-tabs" id="myTab">
                              <li class="active"><a data-toggle="tab" href="#AllocEmployee">Allocate Employees</a></li>
                              <li><a data-toggle="tab" href="#ExistingEmployees">Current Allocations</a></li>
                              <li><a data-toggle="tab" href="#EmpHistory">Allocation History</a></li>
                            </ul>

                            <div class="tab-content" id="myTabContent">
                                <div id="AllocEmployee" class="tab-pane fade in active">
                                    <div class="page-header">
                                        <div class="row">
                                            <div class="col-md-3"><h3>New Allocations </h3></div>
                                            <div class="row col-md-9">
                                                <form name="searchEmp" id="searchEmp" action="@Url.Action("SearchEmployees","ProjAllocation")">
                                                    <div class="form-group">        
                                                        <div class="col-md-12">                            
                                                            <label class="control-label"><b>Search on</b> : </label> <input type="radio" name="searchCode" id="searchCode" value="1" checked="checked"/>  Employee Name | <input type="radio"  name="searchCode" value="2"/>  Employee Code
                                                            <div class="col-md-5 pull-right">
                                                                <a href="javascript:;" class="pull-right relativeAddNew" data-source="@Url.Action("showResourcePlan","ProjAllocation")">Show Project Resource Plan</a>
                                                                <a href="javascript:;" id="showAdvSearch">Advanced Search <i class="icon-">&#xf00e;</i></a>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="input-group">
                                                            <input type="hidden" name="projectID" id="projectID" value="" />
                                                            <input type="hidden" name="locationID" id="locationID" value="" />
                                                            <input type="text" class="form-control" name="searchText" id="searchTextBox" onkeydown="return (event.keyCode!=13);">
									                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-med blue-bg saveDefault" data-mode="searchEmployees" data-form="searchEmp" data-id="listing" id="GoButton">GO</button>
									                        </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>                
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="row" id="advancedSearchParams" style="display:none;">
                                            <div class="panel colored">
                                                <div class="panel-heading blue-bg">
                                                    <h5 class="panel-title">Advanced Search Parameters</h5>
                                                    <button type="button" class="btn btn-sm blue-bg pull-right searchProcedure"><i class="icon-">&#xf00e;</i> Search</button>&nbsp;
                                                    <button type="button" class="btn btn-sm blue-bg pull-right close-adv"><i class="icon-">&#xf05c;</i> Hide</button>
                                                </div>
                                                <div class="panel-body" data-pcount="1" id="advSearchOptions">					
                                                    <div class="row" id="pField1" data-rowcount="1">
                                                        <select class="col-lg-2 sField">
                                                            <option value="1">Emp Code</option>
                                                            <option value="2">Emp Name</option>
                                                            <option value="3">Designation</option>
                                                            <option value="4">Employment Status</option>
                                                            <option value="5">Date of Joining</option>
                                                        </select>
                                                        <select class="col-lg-2" id="pOp1">
                                                            <option value="1">equal to</option>
                                                            <option value="2">contains</option>
                                                        </select>
                                                        <div class="col-lg-6">
                                                            <input type="text" class="col-lg-12 tagsinput" value="" id="pValue1"/>
                                                        </div>
                                                        <select class="col-lg-2 sJoinOperator" id="pJoin1" data-item="1" data-action="0">
                                                            <option value="1" selected="selected">Search Ends</option>
                                                            <option value="2">And</option>
                                                            <option value="3">Or</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                	                    <div class="panel colored">
                                            <div class="panel-heading blue-bg">
                                                <h3 class="panel-title">Employees for allocation</h3>
                                                <ul class="pull-right toolbar">
                                                    <li><a href="#" class="icon-button"><i class="icon-">&#xf059;</i></a></li>
                                                    <li><a href="#" class="icon-button mini-max"><i class="icon-">&#xf0aa;</i></a></li>
                                                </ul>
                                            </div>
                                            <div class="panel-body" id="dataList">					
                                           	    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="table table-striped table-bordered" id="processTable">
                                                    <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th>Emp Code</th>
                                                            <th>Name</th>
                                                            <th>Designation</th>
                                                            <th>Location</th>
                                                            <th class="hidden-sm">Status</th>
                                                            <th>Allocate</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="listing">
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>

                                    </div>

                                </div>
                                <div id="ExistingEmployees" class="tab-pane">
                                    <div class="panel colored">
                                        <div class="panel-body">					
                    	                    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="table table-striped table-bordered" id="existingEmployees">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Emp Code</th>
                                                        <th>Name</th>
                                                        <th>Designation</th>
                                                        <th>Location</th>
                                                        <th>Role</th>
                                                        <th>Effective Date</th>
                                                        <th>Reporting To</th>
                                                        <th>Details</th>
                                                        <th>Edit</th>
                                                        <th>Release</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="allocatedEmployees">                             
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div id="EmpHistory" class="tab-pane">
                                    <div class="panel colored">
                                        <div class="panel-body">					
                    	                    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="table table-striped table-bordered" id="employeeHistory">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Emp Code</th>
                                                        <th>Name</th>
                                                        <th>Designation</th>
                                                        <th>Location</th>
                                                        <th>Role</th>
                                                        <th class="hidden-sm">Reporting To</th>
                                                        <th class="hidden-sm">Date Assigned</th>
                                                        <th>Release Date</th>
                                                        <th>Details</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="empHistoryData">                              
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
                                                
        	</div> 
    <!-- Modal -->
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Employee Release</h4>
		</div>
		<div class="modal-body">
        <input type="hidden" name="releaseEmpID" id="releaseEmpID" value="" />
            <ul class="nav nav-tabs" id="ReleaseDet">
                <li class="active"><a data-toggle="tab" href="#RDetails">Release Details</a></li>
                <li><a data-toggle="tab" href="#RSuppDocs">Supporting Documents</a></li>
            </ul>

            <div class="tab-content" id="releasecontents">
                <div id="RDetails" class="tab-pane fade in active">
                    <div class="panel">
                        <div class="panel-body">
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">Release Date:</label>
                            <div class="input-group date datepicker col-md-8">
                                <input type="text" class="form-control">
                                <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">Release By:</label>
                            <label class="col-md-8 control-label">Sandeep Honawar</label>
                        </div>
                    </div>
                     <hr />
                    <div class="row">
                        <div class="form-group col-md-11">
                            <label >Release Comments</label>
                            <div class="controls"><textarea rows="4" class="form-control"></textarea></div>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
                <div id="RSuppDocs" class="tab-pane">
                    <div class="row">
                                    <div class="col-md-12 notification blue-bg">
                 	                     <strong>Supporing Documents</strong> : Upload supporting documents here, click to close this. 
                                    </div>
                                </div>
                    <br />
                    <div class="row">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="col-md-1"></th>
                                                <th>Doc Type</th>
                                                <th>Name</th>
                                                <th>Owner</th>
                                                <th>Remarks</th>
                                            </tr>
                                        </thead>
                                        <tbody id="supportingDocs" data-count="1">
                                            <tr id="D1">
                                                <td><a href="#" data-id="D1" class="addDoc" data-toggle="modal" data-tableid="supportingDocs" data-key="D"><i class="icon-plus-sign"></i></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                </div>
            </div>
		</div>

		<div class="modal-footer">
		  <button type="button" class="btn gray-bg" data-dismiss="modal">Cancel</button>
		  <button type="button" class="btn blue-bg" id="deleteRole" data-dismiss="modal">Confirm Release</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


    <!-- Responsive Modal -->
    <div class="modal fade" id="empDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" style="width:800px;">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Allocation Details</h4>
		</div>
		<div class="modal-body">
            <ul class="nav nav-tabs" id="Ul1">
                <li class="active"><a data-toggle="tab" href="#HDetails">Allocation Details</a></li>
                <li><a data-toggle="tab" href="#HSuppDocs">Supporting Documents</a></li>
                <li><a data-toggle="tab" href="#HAllocHistory">Allocation History</a></li>
            </ul>
            <div class="tab-content" id="HTabContents">
                <div id="HDetails" class="tab-pane fade in active">
                    <br />
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">From:</label>
                                <div class="input-group date datepicker col-md-7">
                                    <input type="text" class="form-control" value="01/01/2013">
                                    <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">To:</label>
                                <div class="input-group date datepicker col-md-7">
                                    <input type="text" class="form-control" value="30/12/2013">
                                    <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Role</label>
                                <div class="controls col-md-7"><select class="chzn-nopadd chzn-select-no-single"><option selected="selected">Project Manager</option> <option>Project Leader</option> <option>Programmer</option> <option>Tester</option> <option>DBA</option> <option>QA</option>  <option>Technical Architect</option></select></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Allocation %</label>
                                <div class="controls col-md-7"><input type="hidden" class="slider col-md-12" value="20" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="100" data-slider-orientation="horizontal" data-slider-selection="after" data-slider-handle="square" data-slider-tooltip="show"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Group</label>
                                <div class="controls col-md-7"><select class="chzn-nopadd chzn-select-no-single"><option>Design Team</option> <option>Employee Module</option> <option>Salary Processing Module</option> <option>UI Team</option></select></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Reporting To</label>
                                <div class="controls col-md-7"><select class="chzn-nopadd chzn-select-no-single"><option>Sandeep Honawar</option> <option>Swaraj Singh</option> <option>Rajesh Singh</option></select></div>
                            </div>
                        </div>
                    </div>
                        <hr />
                    <div class="row">
                        <div class="form-group col-md-11">
                            <label >Allocation Comments</label>
                            <div class="controls"><textarea rows="4" class="form-control"></textarea></div>
                        </div>
                    </div>
                </div>
                <div id="HSuppDocs" class="tab-pane">
                    <div class="row">
                        <div class="col-md-12 notification blue-bg">
                 	            <strong>Supporing Documents</strong> : Upload supporting documents here, click to close this. 
                        </div>
                    </div>
                    <br />
                    <div class="row">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="col-md-1"></th>
                                                <th>Doc Type</th>
                                                <th>Name</th>
                                                <th>Owner</th>
                                                <th>Remarks</th>
                                            </tr>
                                        </thead>
                                        <tbody id="HDocDetails" data-count="2">
                                            <tr id="H1">
                                                <td></td>
                                                <td>Resource Request</td> 
                                                <td><a href="#" data-toggle="modal" class="showDocumentData">Req_Form.xls</a></td>
                                                <td>Sunil Garg</td>
                                                <td>Requisition Form approved by SDM</td>
                                            </tr>
                                            <tr id="H2">
                                                <td><a href="#" data-id="H2" class="addDoc" data-toggle="modal" data-tableid="HDocDetails" data-key="H"><i class="icon-plus-sign"></i></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                </div>
                <div id="HAllocHistory" class="tab-pane">
                    <br />
                    <div class="row">
                         <table class="table">
                                <thead>
                                    <tr>
                                        <th class="col-md-1">Effective Date</th>
                                        <th>Allocation Type</th>
                                        <th>Role</th>
                                        <th>Reporting To</th>
                                        <th>Comments</th>
                                    </tr>
                                </thead>
                                <tbody >
                                    <tr>
                                        <td>12-Jan-13</td>
                                        <td>Contract</td> 
                                        <td>Executive</td>
                                        <td>Sunil Garg</td>
                                        <td>Requisition Form approved by SDM</td>
                                    </tr>
                                    <tr>
                                        <td>31-Dec-13</td>
                                        <td>Permanent</td> 
                                        <td>Executive</td>
                                        <td>Sunil Garg</td>
                                        <td>Confirmed Employee</td>
                                    </tr>
                                </tbody>
                            </table>
                    </div>
                </div>
            </div>       
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
		    <button type="button" class="btn blue-bg changeAlloc" data-dismiss="modal">Submit</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

    <div class="modal fade" id="reqHistDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" style="width:800px;">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Hardware Details</h4>
		</div>
		<div class="modal-body">
            <ul class="nav nav-tabs" id="Ul2">
                <li class="active"><a data-toggle="tab" href="#HDetail">Hardware Details</a></li>
                <li><a data-toggle="tab" href="#HSuppDoc">Supporting Documents</a></li>
                <li><a data-toggle="tab" href="#HAllocHist">Allocation History</a></li>
            </ul>
            <div class="tab-content" id="Div2">
                <div id="HDetail" class="tab-pane fade in active">
                    <br />
                    <br />
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Details</label>
                                <input type="text" class="form-control col-md-7" value="P4 Machines" disabled>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Justification</label>
                                <input type="text" class="form-control col-md-7" value="Added in the project estimates" disabled>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="col-md-4">Specification</label>
                                <textarea rows="2" class="form-control col-md-7" disabled>Pentium Processor, 1GB RAM, 105 GB HDD</textarea>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">From:</label>
                                <div class="input-group date datepicker col-md-7">
                                    <input type="text" class="form-control" value="01-Jan-13" disabled>
                                    <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">To:</label>
                                <div class="input-group date datepicker col-md-7">
                                    <input type="text" class="form-control" value="31-Dec-13" disabled>
                                    <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Billable To Client</label>
                                <div class="controls col-md-7"><select class="chzn-nopadd chzn-select-no-single" disabled><option selected="selected">Yes</option> <option>No</option> <option>Shared</option></select></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4">Number</label>
                                <div class="controls col-md-7"><input type="text" class="form-control" value="3" disabled></div>
                            </div>
                        </div>
                    </div>

                </div>
                <div id="HSuppDoc" class="tab-pane">
                    <div class="row">
                        <div class="col-md-12 notification blue-bg">
                 	            <strong>Supporing Documents</strong> : Upload supporting documents here, click to close this. 
                        </div>
                    </div>
                    <br />
                    <div class="row">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="col-md-1"></th>
                                                <th>Doc Type</th>
                                                <th>Name</th>
                                                <th>Owner</th>
                                                <th>Remarks</th>
                                            </tr>
                                        </thead>
                                        <tbody id="Tbody1" data-count="2">
                                            <tr id="Tr1">
                                                <td></td>
                                                <td>Resource Request</td> 
                                                <td><a href="#" data-toggle="modal" class="showDocumentData">Req_Form.xls</a></td>
                                                <td>Sunil Garg</td>
                                                <td>Requisition Form approved by SDM</td>
                                            </tr>
                                            <tr id="Tr2">
                                                <td><a href="#" data-id="H2" class="addDoc" data-toggle="modal" data-tableid="HDocDetails" data-key="H"><i class="icon-plus-sign"></i></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                </div>
                <div id="HAllocHist" class="tab-pane">
                    <br />
                    <div class="row">
                         <table class="table">
                                <thead>
                                    <tr>
                                        <th class="col-md-1">Effective Date</th>
                                        <th>Allocation Type</th>
                                        <th>Role</th>
                                        <th>Reporting To</th>
                                        <th>Comments</th>
                                    </tr>
                                </thead>
                                <tbody >
                                    <tr>
                                        <td>12-Jan-13</td>
                                        <td>Contract</td> 
                                        <td>Executive</td>
                                        <td>Sunil Garg</td>
                                        <td>Requisition Form approved by SDM</td>
                                    </tr>
                                    <tr>
                                        <td>31-Dec-13</td>
                                        <td>Permanent</td> 
                                        <td>Executive</td>
                                        <td>Sunil Garg</td>
                                        <td>Confirmed Employee</td>
                                    </tr>
                                </tbody>
                            </table>
                    </div>
                </div>
            </div>       
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
    
    
    <div class="modal fade" id="supDocDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
	<div class="modal-dialog">
  <div class="modal-content">
	<div class="modal-header blue-bg">
	  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	  <h4 class="model-title emphasize">Add Supporting Document</h4>
	</div>
	<div class="modal-body">
		<form role="form" id="documentForm">
            <div class="row">
                <input type="hidden" id="nodeid" />
                <input type="hidden" id="tableid" />
                <input type="hidden" id="keyid" />
                <div class="col-md-6">
                    <div class="form-group">
                        <label >Document Type</label>
                        <div class="controls"><input type="text" class="form-control" id="DocType"/></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label >Owner:</label>
                        <div class="controls"><input type="text" class="col-md-12 form-control" name="DocOwner" id="DocOwner"></div>
                    </div>
                </div>
            </div>
            <div class="row">
                <br />
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Remarks</label>
                        <div class="controls"><textarea  rows="3" class="col-md-12" name="DocRemarks" id="DocRemarks"></textarea></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <br />
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Select File</label>
                        <div class="controls"><input type="file" class="styled" name="DocFile" id="DocFile"></div>
                    </div>
                </div>
            </div>
		</form>
        <div class="modal-footer">
            <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
    	    <button type="submit" class="btn blue-bg" id="saveSuppDoc">Save</button>
        </div>
    </div>
  </div><!-- /.modal-content -->	
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<script type="text/javascript">
	    jsTable('processTable');
	    jsTable('existingEmployees');
	    jsTable('employeeHistory');
	    

	    $(document).on("click", "#showAdvSearch", function () {
	        $("#advancedSearchParams").show("slow");
	    });

	    $("body").delegate(".close-adv", "click", function () {
	        $("#advancedSearchParams").hide("slow");
	    });



	    $("body").delegate(".sJoinOperator", "change", function () {
	        var count = parseInt($("#advSearchOptions").data("pcount"));
	        var options = "";

	        if ($(this).val() != 1) {
	            if ($(this).data("action") == "0") {
	                count = count + 1;
	                options = '<div class="row" id="pField' + count + '" data-rowcount="' + count + '">' +
                                    '<select class="col-lg-2 sField">' +
                                        '<option value="1">Emp Code</option>' +
                                        '<option value="2">Emp Name</option>' +
                                        '<option value="3">Designation</option>' +
                                        '<option value="4">Department</option>' +
                                        '<option value="5">Location</option>' +
                                        '<option value="6">Date of Joining</option>' +
                                    '</select>' +
                                    '<select class="col-lg-2" id="pOp' + count + '">' +
                                        '<option value="1">equal to</option>' +
                                        '<option value="2">contains</option>' +
                                    '</select>' +
                                    '<div class="col-lg-6">' +
                                        '<input type="text" class="col-lg-12 tagsinput" value="" id="pValue' + count + '"/>' +
                                    '</div>' +
                                    '<select class="col-lg-2 sJoinOperator" id="pJoin' + count + '" data-item="' + count + '" data-action="0">' +
                                        '<option value="1" selected="selected">Search Ends</option>' +
                                        '<option value="2">And</option>' +
                                        '<option value="3">Or</option>' +
                                    '</select>' +
                                '</div>';
	                $("#advSearchOptions").append(options);
	                $("#advSearchOptions").data("pcount", count);
	                $(this).data("action", "1");
	            }
	        }
	        else {
	            // Remove all items coming after this
	            var itemCount = parseInt(thisItem = $(this).data("item"));
	            $("#advSearchOptions").find(".row").each(function () {
	                if (parseInt($(this).data("rowcount")) > itemCount) $(this).remove();
	            });
	            $(this).data("action", "0");
	        }
	    });

	    $(document).on("click", "#saveSuppDoc", function () {
	        var nodeid = "#" + $("#nodeid").val();
	        var tableid = "#" + $("#tableid").val();
	        var keyid = $("#keyid").val();

	        var anchorNode = $(nodeid).children('td').first().children("a").first();

	        var count = parseInt($(tableid).data("count"));

	        if ($("#DocType").val() == "" || $("#DocFile").val().trim() == "" || $("#DocOwner").val().trim() == "" || $("#DocRemarks").val().trim() == "") alert("All inputs are mandatory. Pl. provide all required input.");
	        else {

	            anchorNode.removeClass("addDoc");
	            anchorNode.addClass("removeDoc");
	            anchorNode.attr("href", "#");
	            anchorNode.children("i").eq(0).removeClass("icon-plus-sign");
	            anchorNode.children("i").eq(0).addClass("icon-remove");

	            $(nodeid).append('<td>' + $("#DocType").val() + '</td> <td><a href="#" data-toggle="modal" class="showDocumentData">' + $("#DocFile").val() + '</a></td> <td>' + $("#DocOwner").val() + '</td> <td>' + $("#DocRemarks").val() + '</td>');

	            //if ((count % 2) == 0) $(nodeid).addClass("success");
	            count = count + 1;
	            $(tableid).data("count", count);

	            $(nodeid).after('<tr id="' + keyid + '' + count + '"><td><a href="#supDocDialog" data-id="' + keyid + '' + count + '" class="addDoc" data-toggle="modal"><i class="icon-plus-sign"></i></a></td></tr>');
	            $("#supDocDialog").modal('hide');

	        }

	    });

	    $("body").delegate(".addDoc", "click", function () {
	        $("#nodeid").val($(this).data("id"));
            $("#tableid").val($(this).data("tableid"));
            $("#keyid").val($(this).data("key"));

	        $("#supDocDialog").modal('show');
	    });

	    $("body").delegate(".removeDoc", "click", function () {
	        if (confirm("Do you want to remove this document ?")) {
	            $("#" + $(this).data("id")).remove();
	        }
	    });

	    $("body").delegate(".allocEmp", "click", function () {
	        $("#empAllocation").modal("show");
	    });

	    $("body").delegate(".empType", "change", function () {
	        if ($(this).val() != 1) $("#endDetails").show("slow");
	        else $("#endDetails").hide("slow");
	    });

	    $("body").delegate(".empType2", "change", function () {
	        if ($(this).val() != 1) $("#endDateDetails").show("slow");
	        else $("#endDateDetails").hide("slow");
	    }); 

	    $("body").delegate(".changeAlloc", "click", function () {
	        confirm("These changes will be recorded in the change history. Do you want to proceed ?");
	    });

	    if ($("#Project").find("option:selected").eq(0).val() > 0) $("#Project").change();

   </script> 
   

}
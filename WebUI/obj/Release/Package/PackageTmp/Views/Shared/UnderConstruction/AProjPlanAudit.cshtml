@{
    Layout = null;
}

@if (@User.Identity.IsAuthenticated)
{
    @Html.Action("BreadCrump", "Menu", new { id = ViewBag.FunctionID })
            <div class="row">
                <div class="form-group">
                    <label class="col-md-2">Select Project</label>
                    <div class="controls col-md-10"><select class="col-md-12 chzn-nopadd chzn-select-no-single"><option>Payroll System</option> <option>Code Migration</option></select></div>
                </div>
            </div>
            <hr />
            <ul class="nav nav-tabs" id="myTab">
                <li class="active"><a data-toggle="tab" href="#ProjPlan">Plan</a></li>
                <li><a data-toggle="tab" href="#ProjTrack">Track</a></li>
            </ul>
            
        <div class="tab-content" id="myTabContent">
            <div id="ProjPlan" class="tab-pane fade in active">
                <br />
                <div class="row">
                    <div class="col-md-12">
                        <a href="javascript:;" id="showfilter" class="pull-left">Filter Tasks <i class="icon-">&#xf00e;</i></a>
                    </div>
                    <hr />
                    <div class="panel colored" id="filterParams">
                        <div class="panel-body filter-bg">
                            <div class="row col-md-12">
                                <div class="col-md-5">
                                        <label class="col-md-2 pull-left filterParams">From</label>
                                        <div class="col-md-9">
                                            <div class="input-group date datepicker">
                                                <input type="text" id="filter_fromDt" class="form-control col-md-9 filterParams">
                                                <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                                            </div>
                                        </div>
                                </div>
                                <div class="col-md-5">
                                    <label class="col-md-2 pull-left filterParams">To</label>
                                    <div class="col-md-9">
                                        <div class="input-group date datepicker">
                                            <input type="text" id="filter_toDt" class="form-control col-md-9 filterParams">
                                            <span class="input-group-addon  accordion-toggle"><i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar"></i></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-med blue-bg searchProcedure pull-right filterParams">GO</button>
                                </div>
                            </div>
                            <div class="row col-md-12">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label class="col-md-2 pull-left filterParams">Plan Status</label>
                                        <div class="col-md-9">
                                            <select class="col-md-12 filterParams chzn-select-no-single">
                                                <option value="1">Not Scheduled</option>
                                                <option value="1">Scheduled</option>
                                                <option value="2">In Progress</option>
                                                <option value="2">Pending</option>
                                                <option value="2">Complete</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label class="col-md-2 pull-left filterParams">Track Status</label>
                                        <div class="col-md-9">
                                            <select class="chzn-select-no-single col-md-12 filterParams">
                                                <option value="1">Delayed</option>
                                                <option value="2">Not Conducted</option>
                                                <option value="3">Open</option>
                                                <option value="3">On Time</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>     
                    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" >
                        <thead>
                            <tr>
                                <th rowspan="2" class="docTableHeader-bg">Ref. ID</th>
                                <th colspan="2" class="docTableHeader-bg">Audit Duration</th>
                                <th colspan="2" class="docTableHeader-bg">Auditor</th>
                                <th colspan="2" class="docTableHeader-bg">Auditee</th>
                                <th rowspan="2" class="docTableHeader-bg">Audit Type</th>
                                <th rowspan="2" class="docTableHeader-bg">Audit Status</th>
                                <th rowspan="2" class="docTableHeader-bg">Track Status</th>
                                <th rowspan="2" class="docTableHeader-bg">View</th>
                                <th rowspan="2" class="docTableHeader-bg">Delete</th>
                            </tr>
                            <tr>
                                <th class="docSubTableHeader-bg">From</th>
                                <th class="docSubTableHeader-bg">To</th>
                                <th class="docSubTableHeader-bg">Role</th>
                                <th class="docSubTableHeader-bg">Name</th>
                                <th class="docSubTableHeader-bg">Role</th>
                                <th class="docSubTableHeader-bg">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>P122-A1</td>
                                <td>28-Nov-14</td>
                                <td>28-Nov-14</td>
                                <td>SQA</td>
                                <td>Supriya Phatak</td>
                                <td>Project Manager</td>
                                <td>Prakash Goel</td>
                                <td>One Time</td>
                                <td>Complete</td>
                                <td><span class="label label-success col-md-12">On Time</span></td>
                                <td><a href="#reqPlanDetails" class="btn btn-med blue-bg" data-toggle="modal"><i class="icon-edit"></i></a></td>
                                <td><a href="#confirmModal" class="btn btn-med red-bg rejectProj" role="button" data-toggle="modal"><i class="icon-remove"></i></a></td>
                            </tr>
                        </tbody>
                    </table>

                </div>
                <div class="row">
                        <div class="panel colored col-md-12">
					    <form role="form">				
                                <div class="panel-body">
                                    <div class="col-lg-12 navbar-fixed-bottom pull-right">
                    	                <div class="row pull-right panel-footer">
                                            <div class="col-lg-12 col-lg-offset-1">
                                                <button type="button" class="btn blue-bg" id="NewTask">Create New</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>					
					    </form>
                    </div>  
                </div>
            </div>
            <div id="ProjTrack" class="tab-pane">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">Track for week starting: <span id="weekStart" class="boldText"></span>  
                                    <a href="#" class="nav_options" id="prevWeek"><i class="icon-double-angle-left"></i> Prev</a>
                                    <a href="#" class="nav_options" id="showToday"><i class="icon-double-angle-down"></i> current</a>
                                    <a href="#" class="nav_options" id="nextWeek">Next <i class="icon-double-angle-right"></i></a>
                                </h3>
                            </div>
                        </div>
                            <div class="panel-body" id="TaskView">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th rowspan="2" class="docTableSequence-bg docTableHeader-bg"></th>
                                            <th rowspan="2" class="docTableHeader-bg">Ref. ID</th>
                                            <th colspan="2" class="docTableHeader-bg">Audit Duration</th>
                                            <th rowspan="2" class="docTableHeader-bg">PM</th>
                                            <th rowspan="2" class="docTableHeader-bg">Auditor</th>
                                            <th rowspan="2" class="docTableHeader-bg">Auditee</th>
                                            <th rowspan="2" class="docTableHeader-bg">Audit Status</th>
                                            <th rowspan="2" class="docTableHeader-bg">Track Status</th>
                                        </tr>
                                        <tr>
                                            <th class="docSubTableHeader-bg">From</th>
                                            <th class="docSubTableHeader-bg">To</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><a href="javascript:;" class="group tree-toggle closed" data-childid="T1"></a></td>
                                            <td><a href="#reqTaskDetails" data-toggle="modal" title="Click to view task">P112-A1</a></td>
                                            <td>10-Nov-14</td>
                                            <td>10-Nov-14</td>
                                            <td>Prakash Goel</td>
                                            <td>Supriya Phatak</td>
                                            <td>Ashok Geete</td>
                                            <td>Complete</td>
                                            <td><span class="label label-success">On Time</span></td>
                                        </tr>
                                        <tr id="T1" style="display:none;">
                                            <td></td>
                                            <td colspan="11">
                                                <table class="table table-bordered">
                                                    <thead>
                                                        <tr class="EditRow">
                                                            <th>NC Description</th>
                                                            <th>Attribution</th>
                                                            <th>Proposed Corrective Action</th>
                                                            <th>Est. Closure Date</th>
                                                            <th>Status</th>
                                                            <th>Status Updated On</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="EditRow">
                                                            <td>Code review for all source code not done</td>
                                                            <td>Coding and Unit Testing</td>
                                                            <td>Plan for Code review tasks in team members well in advance</td>
                                                            <td>10-Nov-14</td>
                                                            <td><span class="label label-success">Closed</span></td>
                                                            <td>14-Nov-14</td>
                                                        </tr>
                                                        <tr class="EditRow">
                                                            <td>Timesheet entries for some tasks not consistent with the planned tasks</td>
                                                            <td>Metrics data will not be reliable</td>
                                                            <td>PM should track the plan against actual timesheet entries</td>
                                                            <td>10-Nov-14</td>
                                                            <td><span class="label label-success">Closed</span></td>
                                                            <td>9-Nov-14</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
    <div class="modal fade" id="reqPlanDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
	<div class="modal-dialog" style="width:900px;">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Audit Plan </h4>
		</div>
		<div class="modal-body">
            <div class="container-fluid">
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Audit Start</label>
                            <input type="text" id="AuditFrmDt" class="form-control mask_date">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Audit Finish</label>
                            <input type="text" id="AuditToDt" class="form-control mask_date">
                        </div>
                    </div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Auditor Role(s)</label>
                            <select class="col-md-12 chzn-nopadd chzn-nopadd chzn-select" multiple><option value="Choose in Audit">Choose in Audit</option> <option value="SQA">SQA</option> <option value="MR">MR</option><option value="Sr. Manager">Sr. Manager</option></select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Auditor Name(s)</label>
                            <select class="col-md-12 chzn-nopadd chzn-nopadd chzn-select" multiple><option value="Choose in Audit">Choose in Audit</option> <option value="Kapil Khanna">Kapil Khanna</option> <option value="Surekha Shetty">Surekha Shetty</option></select>
                        </div>
                    </div>                                
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Auditee Role(s)</label>
                            <select class="col-md-12 chzn-nopadd chzn-nopadd chzn-select" multiple><option value="Choose in Audit">Choose in Audit</option> <option value="Project Manager">Project Manager</option> <option value="Project Leader">Project Leader</option><option value="Developer">Developer</option></select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Auditee Name(s)</label>
                            <select class="col-md-12 chzn-nopadd chzn-nopadd chzn-select" multiple><option value="Choose in Audit">Choose in Audit</option> <option value="Prakash Mehta">Prakash Mehta</option> <option value="Ajit Pawar">Ajit Pawar</option><option value="Rahul Gandhi">Rahul Gandhi</option></select>
                        </div>
                    </div>                                
                </div>
                <hr />
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label class="control-label">Audit Type</label>
                            <select class="col-md-12 chzn-nopadd chzn-nopadd chzn-select"><option value="One Time">One Time</option> <option value="Recurring">Recurring</option></select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group col-md-12">
                            <label>Recurring Period</label>
                            <select class="col-md-12 chzn-nopadd chzn-nopadd chzn-select"><option value="Daily">Daily</option> <option value="Weekly" selected="selected">Weekly</option> <option value="Monthly">Monthly</option></select>
                            <i class="icon-info-sign"></i><i class="info">(Applicable only for Recurring Audits)</i>
                        </div>
                    </div>                                
                </div>
            </div>
        </div>
		<div class="modal-footer">
		    <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
		    <button type="button" class="btn blue-bg" data-dismiss="modal">Save</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


    <div class="modal fade" id="reviewDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Review Comments</h4>
		</div>
		<div class="modal-body">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <input type="hidden" id="statusID" /><input type="hidden" id="statusDesc" />
                        <label class="control-label col-lg-3"><b>Reviewer:</b></label>
                        <label class="control-label col-lg-3 pull-left">Sanjay Goel</label>
                        <label class="control-label col-lg-3"><b>Review Date: </b></label>
                        <label class="control-label col-lg-3 pull-left" id="createDate">01-Oct-13</label>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <label class="col-lg-12"><b>Review Comments</b></label>
                        <textarea name="reviewComments" class="col-lg-12" rows="5" id="reviewComments"></textarea>                    
                    </div>
                </div>
            </div>
		</div>

		<div class="modal-footer">
		  <button type="button" class="btn gray-bg" data-dismiss="modal">Cancel</button>
		  <button type="button" class="btn blue-bg" id="saveReview">Save</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


	<script type="text/javascript">
	    var newTaskParams = true;

		var config = {
		  '.chzn-select-no-single' : {disable_search_threshold:10},
		}
		for (var selector in config) {
		  $(selector).chosen(config[selector]);
		}

		
		$("#showfilter").click();

		$(document).on("click", "#NewTask", function () {
		    $("#reqPlanDetails").modal("show");
		});

		$('#reqPlanDetails').on('shown.bs.modal', function () {
		    if (newTaskParams) {
		        $(".chzn-select").chosen({ "disable_search_threshold": 10 });
		        $(".mask_date").inputmask("d/m/y", { "placeholder": "dd/mm/yyyy" });
		        newTaskParams = false;
		    }
		})

		$("body").delegate(".group", "click", function () {
		    $("#" + $(this).data("childid")).toggle();
		    $(this).toggleClass("closed");
		});

    </script> 
   

}
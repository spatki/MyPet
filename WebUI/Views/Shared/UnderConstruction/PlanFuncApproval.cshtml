@{
    Layout = null;
}

@if (@User.Identity.IsAuthenticated)
{
    @Html.Action("BreadCrump", "Menu", new { id = ViewBag.FunctionID })
             <div class="row">
                 <div class="panel colored col-md-12">
					<form role="form">
					
                 <div class="panel-body">
                       <div class="row">
                            <div class="form-group">
                                <label class="col-md-2">Select Function</label>
                                <div class="controls col-md-10"><select class="col-md-12 chzn-nopadd chzn-select-no-single"><option>ADMIN</option> <option>CoE</option> <option>Finance</option> <option>HRD</option> <option>Sales</option>  <option>Travel & Deputation</option></select></div>
                            </div>
                       </div>
                        <hr />
					
                    	<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="advanced-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Status</th>
                                    <th>Effective From</th>
                                    <th>Submitted On</th>
                                    <th>Submitted By</th>
                                    <th>View</th>
                                    <th>Approve</th>
                                    <th>Reject</th>
                                </tr>
                            </thead>
                            <tbody>
                                    <tr>
                                        <td>E001</td> 
                                        <td>Swaraj Singh</td> 
                                        <td class="projstatus" id="P1">New Allocation Request</td> 
                                        <td>01-Oct-13</td> 
                                        <td>26-Sep-13</td> 
                                        <td>Shweta Patki</td> 
                                        <td><a href="#empDetails" class="btn btn-med blue-bg" data-toggle="modal"><i class="icon-">&#xf06e;</i></a></td>
                                        <td><a href="#" class="btn btn-med green-bg approveProj"><i class="icon-">&#xf00c;</i></a></td>
                                        <td><a href="#confirmModal" class="btn btn-med red-bg  rejectProj" role="button" data-toggle="modal"><i class="icon-">&#xf112;</i></a></td>
                                    </tr>
                                    <tr>
                                        <td>E111</td> 
                                        <td>Ajay Goel</td> 
                                        <td class="projstatus" id="P2">Allocation Changes</td> 
                                        <td>11-Nov-13</td> 
                                        <td>26-Sep-13</td> 
                                        <td>Shweta Patki</td> 
                                        <td><a href="#empDetails" class="btn btn-med blue-bg" data-toggle="modal"><i class="icon-">&#xf06e;</i></a></td>
                                        <td><a href="#" class="btn btn-med green-bg approveProj"><i class="icon-">&#xf00c;</i></a></td>
                                        <td><a href="#confirmModal" class="btn btn-med red-bg  rejectProj" role="button" data-toggle="modal"><i class="icon-">&#xf112;</i></a></td>
                                    </tr>

                            </tbody>
                        </table>
                       
                    </div>					
					</form>
                </div>  
            </div>

    <div class="modal fade" id="reviewDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Review Comments</h4>
		</div>
		<div class="modal-body">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <input type="hidden" id="statusID" /><input type="hidden" id="statusDesc" />
                        <label class="control-label col-lg-3"><b>Reviewer:</b></label>
                        <label class="control-label col-lg-3 pull-left">Sanjay Goel</label>
                        <label class="control-label col-lg-3"><b>Review Date: </b></label>
                        <label class="control-label col-lg-3 pull-left" id="createDate">01-Oct-13</label>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <label class="col-lg-12"><b>Review Comments</b></label>
                        <textarea name="reviewComments" class="col-lg-12" rows="5" id="reviewComments"></textarea>                    
                    </div>
                </div>
            </div>
		</div>

		<div class="modal-footer">
		  <button type="button" class="btn gray-bg" data-dismiss="modal">Cancel</button>
		  <button type="button" class="btn blue-bg" id="saveReview">Save</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


    <div class="modal fade" id="empDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" style="width:800px;">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Allocation Details</h4>
		</div>
		<div class="modal-body">
            <ul class="nav nav-tabs" id="Ul1">
                <li class="active"><a data-toggle="tab" href="#HDetails">Allocation Details</a></li>
                <li><a data-toggle="tab" href="#HSuppDocs">Supporting Documents</a></li>
                <li><a data-toggle="tab" href="#HAllocHistory">Allocation History</a></li>
            </ul>
            <div class="tab-content" id="HTabContents">
                <div id="HDetails" class="tab-pane fade in active">
                    <br />
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">Effective From:</label>
                            <div class="col-md-8" >
                                <input type="text" class="form-control" value="01-Oct-13" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">Reporting To</label>
                            <div class="controls col-md-8"><select class="chzn-nopadd chzn-select-no-single" disabled><option>Sandeep Honawar</option> <option selected="selected">Swaraj Singh</option> <option>Rajesh Singh</option></select></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">Role</label>
                            <div class="controls col-md-8"><select class="chzn-nopadd chzn-select-no-single" disabled><option>Manager</option> <option>Asst. Manager</option> <option selected="selected">Accountant</option> <option>Helper</option> <option>Trainee</option></select></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">Allocation Type</label>
                            <div class="controls col-md-8"><select class="chzn-nopadd chzn-select-no-single empType2" disabled> <option value="1">Permanent</option> <option value="2">Temporary</option> <option value="3">Contract</option></select></div>
                        </div>
                    </div>
                    <div class="row" style="display:none" id="endDateDetails">
                        <div class="form-group">
                            <label class=" col-md-3">End Date&nbsp;&nbsp;</label>
                            <div class="col-md-7">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                        <hr />
                    <div class="row">
                        <div class="form-group col-md-11">
                            <label >Allocation Comments</label>
                            <div class="controls"><textarea rows="4" class="form-control" disabled>Based on resource requisition</textarea></div>
                        </div>
                    </div>
                </div>
                <div id="HSuppDocs" class="tab-pane">
                    <div class="row">
                        <div class="col-md-12 notification blue-bg">
                 	            <strong>Supporing Documents</strong> : Upload supporting documents here, click to close this. 
                        </div>
                    </div>
                    <br />
                    <div class="row">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="col-md-1"></th>
                                                <th>Doc Type</th>
                                                <th>Name</th>
                                                <th>Owner</th>
                                                <th>Remarks</th>
                                            </tr>
                                        </thead>
                                        <tbody id="HDocDetails" data-count="2">
                                            <tr id="H1">
                                                <td></td>
                                                <td>Resource Request</td> 
                                                <td><a href="#" data-toggle="modal" class="showDocumentData">Req_Form.xls</a></td>
                                                <td>Sunil Garg</td>
                                                <td>Requisition Form approved by SDM</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                </div>
                <div id="HAllocHistory" class="tab-pane">
                    <br />
                    <div class="row">
                         <table class="table">
                                <thead>
                                    <tr>
                                        <th class="col-md-1">Effective Date</th>
                                        <th>Allocation Type</th>
                                        <th>Role</th>
                                        <th>Reporting To</th>
                                        <th>Comments</th>
                                    </tr>
                                </thead>
                                <tbody >
                                    <tr>
                                        <td>12-Jan-13</td>
                                        <td>Contract</td> 
                                        <td>Executive</td>
                                        <td>Sunil Garg</td>
                                        <td>Requisition Form approved by SDM</td>
                                    </tr>
                                    <tr>
                                        <td>31-Dec-13</td>
                                        <td>Permanent</td> 
                                        <td>Executive</td>
                                        <td>Sunil Garg</td>
                                        <td>Confirmed Employee</td>
                                    </tr>
                                </tbody>
                            </table>
                    </div>
                </div>
            </div>       
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

<div class="modal fade" id="showDocument" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-remote="Documents/Projects/BRD for Process Accelerator v1.1.pdf" >
	<div class="modal-dialog"  style="width:80%; height:90%;overflow:auto;">
  <div class="modal-content">
	<div class="modal-header blue-bg">
	  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	  <h4 class="model-title emphasize">View Document</h4>
	</div>
	<div class="modal-body">
        <div class="row" id="docContent">
            Document contents will appear here...
        </div>
        <div class="modal-footer">
            <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div><!-- /.modal-content -->	
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


	<script type="text/javascript">
  	var config = {
      '.chzn-select-no-single' : {disable_search_threshold:10},
    }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    }

    $("body").delegate(".showDocumentData", "click", function () {
        //        $("#showDocument").modal("show");
        window.open("Documents/Projects/Example.pdf", null,"height=400,width=600,status=yes,toolbar=no,menubar=no,location=no,top=200,left=300");
    });

    $("body").delegate(".approveProj", "click", function () {
        if (confirm("Do you want to approve this request ? ")) {
            $("#statusID").val($(this).parent().parent().children(".projstatus").eq(0).prop("id"));
            $("#statusDesc").val("Approved");
            $("#reviewDetails").modal("show");
        }
    });

    $("body").delegate("#saveReview", "click", function () {
        var oldStatus = $("#" + $("#statusID").val()).text();
        $("#" + $("#statusID").val()).text("(" + oldStatus + ") " + $("#statusDesc").val());
        $("#reviewDetails").modal("hide");
    });

    $("body").delegate(".rejectProj", "click", function () {
        if (confirm("Do you want to reject this request ? ")) {
            $("#statusID").val($(this).parent().parent().children(".projstatus").eq(0).prop("id"));
            $("#statusDesc").val("Rejected");
            $("#reviewDetails").modal("show");
        }
    });
    

   </script> 
   
               
}
@{
    Layout = null;
}

@if (@User.Identity.IsAuthenticated)
{
    @Html.Action("BreadCrump", "Menu", new { id = ViewBag.FunctionID })
            <div class="row">
                 <div class="panel colored col-md-12">
					<form role="form">
					
                 <div class="panel-body">
					
                    	<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="advanced-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Submitted By</th>
                                    <th>View</th>
                                    <th>Approve</th>
                                    <th>Reject</th>
                                </tr>
                            </thead>
                            <tbody>
                                    <tr>
                                        <td>PR001DE</td> 
                                        <td>Payroll System</td> 
                                        <td class="projstatus" id="P1">Initiation Request Submitted</td> 
                                        <td>26-Sep-13</td> 
                                        <td>Shweta Patki</td> 
                                        <td><a href="#viewProjDetails" class="btn btn-med blue-bg" data-toggle="modal"><i class="icon-">&#xf06e;</i></a></td>
                                        <td><a href="#" class="btn btn-med green-bg approveProj"><i class="icon-">&#xf00c;</i></a></td>
                                        <td><a href="#confirmModal" class="btn btn-med red-bg  rejectProj" role="button" data-toggle="modal"><i class="icon-">&#xf112;</i></a></td>
                                    </tr>
                                    <tr>
                                        <td>PR002DE</td> 
                                        <td>Code Migration</td> 
                                        <td class="projstatus" id="Td1">Closure Initiated</td> 
                                        <td>26-Sep-13</td> 
                                        <td>Shweta Patki</td> 
                                        <td><a href="#viewProjDetails" class="btn btn-med blue-bg" data-toggle="modal"><i class="icon-">&#xf06e;</i></a></td>
                                        <td><a href="#" class="btn btn-med green-bg approveProj"><i class="icon-">&#xf00c;</i></a></td>
                                        <td><a href="#confirmModal" class="btn btn-med red-bg  rejectProj" role="button" data-toggle="modal"><i class="icon-">&#xf112;</i></a></td>
                                    </tr>

                            </tbody>
                        </table>
                       
                    </div>					
					</form>
                </div>  
            </div>

    <div class="modal fade" id="reviewDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  <h4 class="modal-title">Review Comments</h4>
		</div>
		<div class="modal-body">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <input type="hidden" id="statusID" /><input type="hidden" id="statusDesc" />
                        <label class="control-label col-lg-3"><b>Reviewer:</b></label>
                        <label class="control-label col-lg-3 pull-left">Sanjay Goel</label>
                        <label class="control-label col-lg-3"><b>Review Date: </b></label>
                        <label class="control-label col-lg-3 pull-left" id="createDate">01-Oct-13</label>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <label class="col-lg-12"><b>Review Comments</b></label>
                        <textarea name="reviewComments" class="col-lg-12" rows="5" id="reviewComments"></textarea>                    
                    </div>
                </div>
            </div>
		</div>

		<div class="modal-footer">
		  <button type="button" class="btn gray-bg" data-dismiss="modal">Cancel</button>
		  <button type="button" class="btn blue-bg" id="saveReview">Save</button>
		</div>
	  </div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->


<div class="modal fade" id="viewProjDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
	<div class="modal-dialog"  style="width:80%; height:90%;overflow:auto;">
  <div class="modal-content">
	<div class="modal-header blue-bg">
	  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	  <h4 class="model-title emphasize">Project Details</h4>
	</div>
	<div class="modal-body">
        <div>
        <ul class="nav nav-tabs" id="myTab">
                <li class="active"><a data-toggle="tab" href="#ProjDetails">Project Details</a></li>
                <li><a data-toggle="tab" href="#ClientDetails">Client Information</a></li>
                <li><a data-toggle="tab" href="#SuppInfo">Supporting Information</a></li>
                <li><a data-toggle="tab" href="#RevHist">Review History</a></li>
            </ul>
                        
            <div class="tab-content" id="myTabContent">
                <div id="ProjDetails" class="tab-pane fade in active">
                <br />
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                        <label>Project Code</label>
                        <div class="controls"><input type="text" class="form-control" value="PR001DE" disabled></div>
                    </div>
                </div>
                            
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Date Of Initiation</label>
                        <div class="controls"><input type="text" class="form-control" value="26-Sep-13" disabled></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                    <label>Project Name</label>
                    <div class="controls"><input type="text" value="Payroll System" class="form-control" disabled></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                    <label>Project Type</label>
                    <div class="controls"><input type="text" value="Development" class="form-control" disabled></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                    <label>Project Description</label>
                    <div class="controls"><textarea rows="4" class="col-md-12" disabled>In-house Payroll Processing system</textarea></div>
                    </div>
                </div>
            </div>
                        
            <div class="row">                           
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Planned Start Date</label>
                        <div class="controls"><input type="text" class="form-control" value="15-Nov-13" disabled></div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Planned Finish Date</label>
                        <div class="controls"><input type="text" class="form-control" value="30-Sep-14" disabled></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                    <label>Project Sponser</label>
                        <div class="controls"><input type="text" class="form-control" value="Sandeep Honawar" disabled></div>
                    </div>
                </div>
                            
                <div class="col-md-6">
                    <div class="form-group">
                    <label>Project Approver</label>
                    <div class="controls"><input type="text" class="form-control" value="MV Muralidharan" disabled></div>
                    </div>
                </div>
            </div>                             
        </div>
                <div id="ClientDetails" class="tab-pane">
                    <br />
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Client Name</label>
                                <div class="controls"><input type="text" class="form-control" value="AIG" disabled></div>
                            </div>
                        </div>
                                 
                        <div class="col-md-6">
                            <div class="form-group">
                            <label>Client Code</label>
                            <div class="controls"><input type="text" class="form-control" value="CL0023-AIG" disabled></div>
                            </div>
                        </div>                            
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Client</label>
                                <div class="controls"><input type="text" class="form-control" value="External" disabled></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                            <label>Name</label>
                            <div class="controls"><input type="text" class="form-control" value="AIG" disabled></div>
                            </div>
                        </div>                            
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                            <label>Client Details</label>
                            <div class="controls"><textarea rows="3" class="form-control" disabled>American Insurance Group</textarea></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                            <label>Contact Person / Details</label>
                            <div class="controls"><textarea rows="3" class="form-control">Mr. John Base, off: 224-123-2211, cell: 090-889-1111, email: johnb@aig.com</textarea></div>
                            </div>
                        </div>                            
                    </div>

                </div>
                <div id="SuppInfo" class="tab-pane">
                    <br />
                    <div class="row">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Doc Type</th>
                                    <th>Name</th>
                                    <th>Owner</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody id="supportingDocs" data-count="4">
                                <tr id="D1">
                                    <td>SOW</td>
                                    <td><a href="#" data-toggle="modal" class="showDocumentData">SOW_Ref1123.docx</a></td>
                                    <td>John Plain</td>
                                    <td>Approved by Client</td>
                                </tr>
                                <tr id="D2">
                                    <td>BRD</td>
                                    <td><a href="#" data-toggle="modal" class="showDocumentData">BRD_Ref1213.xlsx</a></td>
                                    <td>Shweta Patki</td>
                                    <td>Approved by Client</td>
                                </tr>
                                <tr id="D3">
                                    <td>Estimates</td>
                                    <td><a href="#" data-toggle="modal" class="showDocumentData">Proj_Estimates.xlsx</a></td>
                                    <td>Shweta Patki</td>
                                    <td>Approved by Client</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="RevHist" class="tab-pane">
                    <br />
                    <div class="row">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>User</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody id="Tbody1" data-count="4">
                                <tr id="Tr1">
                                    <td>23-Sep-13</td>
                                    <td>Initiation Request Submitted</td>
                                    <td>Shweta Patki</td>
                                    <td>Pl. review and approve this request</td>
                                </tr>
                                <tr class="success"  id="Tr2">
                                    <td>02-Oct-13</td>
                                    <td>Rejected</td>
                                    <td>Sandeep Honawar</td>
                                    <td>Change the planned dates for this project</td>
                                </tr>
                                <tr id="Tr3">
                                    <td>05-Oct-13</td>
                                    <td>Revised</td>
                                    <td>Shweta Patki</td>
                                    <td>Necessary Changes made</td>
                                </tr>
                                <tr class="success" id="Tr5">
                                    <td>06-Oct-13</td>
                                    <td>Approved</td>
                                    <td>Sandeep Honawar</td>
                                    <td>Project Approved</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>             
        </div>
        <div class="modal-footer">
            <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div><!-- /.modal-content -->	
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

<div class="modal fade" id="showDocument" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-remote="Documents/Projects/BRD for Process Accelerator v1.1.pdf" >
	<div class="modal-dialog"  style="width:80%; height:90%;overflow:auto;">
  <div class="modal-content">
	<div class="modal-header blue-bg">
	  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	  <h4 class="model-title emphasize">View Document</h4>
	</div>
	<div class="modal-body">
        <div class="row" id="docContent">
            Document contents will appear here...
        </div>
        <div class="modal-footer">
            <button type="button" class="btn gray-bg" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div><!-- /.modal-content -->	
	</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<script type="text/javascript">
  	var config = {
      '.chzn-select-no-single' : {disable_search_threshold:10},
    }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    }

    $("body").delegate(".showDocumentData", "click", function () {
        //        $("#showDocument").modal("show");
        window.open("Documents/Projects/Example.pdf", null,"height=400,width=600,status=yes,toolbar=no,menubar=no,location=no,top=200,left=300");
    });

    $("body").delegate(".approveProj", "click", function () {
        if (confirm("Do you want to approve this request ? ")) {
            $("#statusID").val($(this).parent().parent().children(".projstatus").eq(0).prop("id"));
            $("#statusDesc").val("Approved");
            $("#reviewDetails").modal("show");
        }
    });

    $("body").delegate("#saveReview", "click", function () {
        var oldStatus = $("#" + $("#statusID").val()).text();
        $("#" + $("#statusID").val()).text("(" + oldStatus + ") " + $("#statusDesc").val());
        $("#reviewDetails").modal("hide");
    });

    $("body").delegate(".rejectProj", "click", function () {
        if (confirm("Do you want to reject this request ? ")) {
            $("#statusID").val($(this).parent().parent().children(".projstatus").eq(0).prop("id"));
            $("#statusDesc").val("Rejected");
            $("#reviewDetails").modal("show");
        }
    });
    

   </script> 

}